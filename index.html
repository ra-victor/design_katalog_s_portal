<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT-Serviceportalen | Ny Best√§llning</title>
    <style>
        /* GRUNDL√ÑGGANDE STIL (Corporate Look) */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; color: #333; overflow-x: hidden; }
        
        /* HEADER */
        .header { background: white; border-bottom: 3px solid #0078d4; padding: 0 40px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .header-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; height: 70px; }
        .logo { font-size: 22px; font-weight: 600; color: #0078d4; }
        .user-menu { display: flex; align-items: center; gap: 25px; }
        .user-name { display: flex; align-items: center; gap: 10px; padding: 8px 16px; background: #f3f3f3; border-radius: 4px; cursor: pointer; }

        /* LAYOUT */
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; padding-bottom: 100px; }
        .breadcrumb { font-size: 14px; color: #666; margin-bottom: 30px; }
        .page-title { font-size: 32px; font-weight: 600; margin-bottom: 10px; color: #1a1a1a; }
        .page-subtitle { font-size: 16px; color: #666; margin-bottom: 40px; }
        
        /* CARDS & FORMS */
        .card { background: white; border-radius: 8px; padding: 30px; margin-bottom: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.08); border: 1px solid #eaeaea; }
        .card-title { font-size: 20px; font-weight: 600; margin-bottom: 8px; color: #1a1a1a; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .card-subtitle { font-size: 14px; color: #666; margin-bottom: 25px; margin-top: 5px; }
        .form-group { margin-bottom: 30px; }
        .form-label { display: block; font-weight: 500; margin-bottom: 12px; color: #333; }
        .required { color: #d13438; }
        .form-input { width: 100%; padding: 12px; border: 1px solid #d1d1d1; border-radius: 4px; font-size: 14px; transition: border-color 0.2s; }
        .form-hint { font-size: 13px; color: #666; margin-top: 8px; font-style: italic; }

        /* KNAPPAR */
        .btn { padding: 12px 24px; border: none; border-radius: 4px; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.2s; }
        .btn-primary { background: #0078d4; color: white; }
        .btn-primary:hover { background: #106ebe; }
        .btn-secondary { background: white; color: #333; border: 1px solid #d1d1d1; }
        .btn-secondary:hover { background: #f3f3f3; }

        /* --- KOMPONENT: NAMN-V√ÑLJARE (ALFABETHJUL) --- */
        .name-selector { display: flex; gap: 30px; align-items: flex-start; padding: 20px; background: #f9f9f9; border: 1px solid #e1e1e1; border-radius: 8px; flex-wrap: wrap; }
        .alphabet-wheel-container { text-align: center; }
        .alphabet-wheel { border: 2px solid #0078d4; border-radius: 50%; box-shadow: 0 4px 8px rgba(0,0,0,0.1); cursor: pointer; }
        .name-output { flex: 1; min-width: 200px; }
        .name-display { background: white; border: 2px solid #0078d4; border-radius: 4px; padding: 20px; min-height: 60px; font-size: 20px; font-family: 'Courier New', monospace; word-break: break-all; margin-bottom: 15px; }
        .name-controls { display: flex; gap: 10px; flex-wrap: wrap; }

        /* --- KOMPONENT: TELEFON (PRECISION SLIDER) --- */
        .phone-input-modern { padding: 20px; background: linear-gradient(135deg, #f9f9f9 0%, #ffffff 100%); border: 1px solid #e1e1e1; border-radius: 8px; }
        .phone-display { text-align: center; font-size: 28px; font-family: 'Courier New', monospace; color: #0078d4; font-weight: 600; padding: 15px; background: white; border: 2px solid #0078d4; border-radius: 8px; margin-bottom: 20px; letter-spacing: 2px; }
        .phone-slider { width: 100%; height: 8px; background: #e1e1e1; outline: none; -webkit-appearance: none; border-radius: 4px; }
        .phone-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; background: white; border: 3px solid #0078d4; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }

        /* --- KOMPONENT: DATUM (BIN√ÑR S√ñKNING) --- */
        .date-picker-optimized { padding: 20px; background: white; border: 2px solid #0078d4; border-radius: 8px; text-align: center; }
        .date-display { font-size: 32px; font-weight: 700; color: #0078d4; margin: 20px 0; font-family: 'Courier New', monospace; }
        .date-buttons { display: flex; gap: 10px; justify-content: center; margin-bottom: 15px; flex-wrap: wrap; }
        .date-btn { padding: 10px 20px; font-size: 14px; font-weight: 600; border: none; border-radius: 4px; cursor: pointer; }
        .date-btn-before { background: #ff6b6b; color: white; }
        .date-btn-after { background: #51cf66; color: white; }
        .date-btn-exact { background: #0078d4; color: white; }

        /* --- KOMPONENT: KOSTNADSST√ÑLLE (SNURROR) --- */
        .cost-center-visual { display: flex; gap: 15px; padding: 20px; background: #f9f9f9; border: 1px solid #e1e1e1; border-radius: 8px; justify-content: center; flex-wrap: wrap; }
        .digit-spinner { text-align: center; }
        .digit-canvas { border: 2px solid #0078d4; border-radius: 8px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: block; margin: 0 auto; background: white; }
        .digit-value { margin-top: 10px; font-size: 24px; font-weight: 700; color: #0078d4; font-family: 'Courier New', monospace; }

        /* --- KOMPONENT: L√ñSENORD (ROULETTE) --- */
        .password-roulette-container { background: #2b2b2b; padding: 20px; border-radius: 8px; color: white; text-align: center; }
        .roulette-display { background: #000; font-family: 'Courier New', monospace; font-size: 24px; padding: 15px; margin-bottom: 20px; border: 1px solid #444; min-height: 60px; letter-spacing: 3px; color: #00ff00; word-break: break-all; }
        .roulette-active-char-box { width: 80px; height: 80px; background: white; color: black; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 40px; font-weight: bold; border: 4px solid #0078d4; border-radius: 10px; }
        .password-strength-meter { height: 6px; background: #444; margin-top: 15px; border-radius: 3px; overflow: hidden; }
        .strength-bar { height: 100%; width: 0%; background: #d13438; transition: width 0.3s, background 0.3s; }
        .roulette-controls { display: flex; justify-content: center; gap: 10px; }

        /* --- KOMPONENT: LEVERANS (GEO + VIND) --- */
        .geo-picker { padding: 20px; background: #eef6fb; border: 1px solid #b3d6f2; border-radius: 8px; }
        .geo-display { font-family: monospace; text-align: center; margin-bottom: 15px; font-size: 16px; color: #0078d4; font-weight: bold; }
        .geo-map-placeholder { height: 250px; background: #fff; border: 2px dashed #ccc; position: relative; margin-bottom: 20px; overflow: hidden; border-radius: 4px; }
        /* Rutn√§t f√∂r "karta"-k√§nsla */
        .geo-map-placeholder::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: linear-gradient(#e5e5e5 1px, transparent 1px), linear-gradient(90deg, #e5e5e5 1px, transparent 1px); background-size: 20px 20px; }
        .geo-pin { font-size: 30px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -100%); transition: top 0.1s linear, left 0.1s linear; z-index: 10; }
        .wind-indicator { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); padding: 5px 10px; font-size: 12px; border-radius: 4px; border: 1px solid #ccc; z-index: 20; font-weight: bold; }
        .geo-slider { width: 100%; margin: 10px 0; }

        /* --- KOMPONENT: VOLYM (GRAVITATION) --- */
        .volume-control { padding: 25px; background: white; border: 2px solid #0078d4; border-radius: 8px; position: relative; }
        /* Volymen styrs av globala event, stil fixas i HTML-sektionen */

        /* --- KOMPONENT: TJ√ÑNSTER (MULTI-CLICK) --- */
        .service-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .service-item { background: white; border: 1px solid #e1e1e1; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.2s; position: relative; }
        .service-item:hover { border-color: #0078d4; box-shadow: 0 4px 8px rgba(0,0,0,0.12); }
        .service-icon { font-size: 28px; margin-bottom: 10px; }
        .click-counter { position: absolute; top: 10px; right: 10px; background: #0078d4; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; }

        /* --- KOMPONENT: VILLKOR (SCROLL & BALANS) --- */
        .terms-scroll-box { height: 150px; overflow-y: scroll; border: 1px solid #ccc; padding: 15px; background: #f9f9f9; margin-bottom: 20px; font-size: 12px; color: #666; line-height: 1.6; }
        .approval-container { margin-top: 15px; height: 60px; background: #e1e1e1; border-radius: 30px; position: relative; user-select: none; border: 1px solid #ccc; }
        .approval-zone { position: absolute; left: 72%; top: 0; bottom: 0; width: 30px; background: rgba(186, 216, 10, 0.4); border-left: 1px dashed #999; border-right: 1px dashed #999; }
        .approval-thumb { position: absolute; left: 10px; top: 4px; width: 50px; height: 50px; background: white; border-radius: 50%; box-shadow: 0 2px 5px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; font-size: 11px; cursor: grab; font-weight: bold; color: #666; border: 2px solid #999; z-index: 5; transition: background 0.2s; }
        .approval-thumb:active { cursor: grabbing; background: #0078d4; color: white; border-color: #005a9e; }
        .approval-timer { position: absolute; top: -25px; right: 0; font-family: monospace; font-weight: bold; color: #333; }
        
        .notification-banner { background: #fff4ce; border: 1px solid #ffb900; border-radius: 4px; padding: 15px 20px; margin-bottom: 30px; display: flex; align-items: center; gap: 15px; }

        @media (max-width: 768px) {
            .name-selector { flex-direction: column; }
            .service-grid { grid-template-columns: 1fr; }
            .header-content { padding: 0 20px; }
        }
    </style>
</head>
<body>

    <!-- HEADER -->
    <div class="header">
        <div class="header-content">
            <div class="logo">IT-Serviceportalen</div>
            <div class="user-menu">
                <div class="user-name">
                    <span>üë§</span>
                    <span>Anna Andersson</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="breadcrumb">Hem > Tj√§nster > Ny best√§llning</div>
        
        <h1 class="page-title">Best√§ll beh√∂righet & Utrustning</h1>
        <p class="page-subtitle">Fyll i formul√§ret noggrant. Felaktiga uppgifter raderas automatiskt.</p>

        <div class="notification-banner">
            <span style="font-size: 20px;">üí°</span>
            <div>
                <strong>Uppdatering:</strong> Vi har inf√∂rt "friktionsbaserad design" f√∂r att s√§kerst√§lla att du verkligen t√§nker igenom din best√§llning.
            </div>
        </div>

        <!-- KORT 1: PERSONUPPGIFTER -->
        <div class="card">
            <h2 class="card-title">Personuppgifter</h2>
            <p class="card-subtitle">Identifiera dig sj√§lv.</p>
            
            <!-- Namn -->
            <div class="form-group">
                <label class="form-label">Fullst√§ndigt namn <span class="required">*</span></label>
                <div class="name-selector">
                    <div class="alphabet-wheel-container">
                        <canvas class="alphabet-wheel" id="alphabetWheel" width="140" height="140"></canvas>
                        <p class="form-hint">Klicka f√∂r att v√§lja bokstav</p>
                    </div>
                    <div class="name-output">
                        <div class="name-display" id="nameDisplay"></div>
                        <div class="name-controls">
                            <button type="button" class="btn btn-secondary" id="nameSpace">Mellanslag</button>
                            <button type="button" class="btn btn-secondary" id="nameBackspace">‚å´ Radera</button>
                            <button type="button" class="btn btn-secondary" id="nameClear">Rensa allt</button>
                        </div>
                    </div>
                </div>
                <div class="form-hint">Hjulet snurrar med varierande hastighet f√∂r s√§kerhets skull.</div>
            </div>

            <!-- Telefon -->
            <div class="form-group">
                <label class="form-label">Mobiltelefon <span class="required">*</span></label>
                <div class="phone-input-modern">
                    <div class="phone-display" id="phoneDisplay">07X-XXX XX XX</div>
                    <input type="range" class="phone-slider" id="phoneSlider" min="700000000" max="799999999" value="700000000" step="1">
                    <div class="form-hint">Finjustera numret med reglaget. Vi rekommenderar en stadig handmus.</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">E-postadress <span class="required">*</span></label>
                <input type="email" class="form-input" id="emailInput" placeholder="namn@foretag.se">
            </div>
        </div>

        <!-- KORT 2: ANST√ÑLLNING -->
        <div class="card">
            <h2 class="card-title">Anst√§llningsuppgifter</h2>
            <p class="card-subtitle">Organisatorisk placering.</p>

            <!-- Datum -->
            <div class="form-group">
                <label class="form-label">Startdatum <span class="required">*</span></label>
                <div class="date-picker-optimized">
                    <p style="margin-bottom: 20px; color: #666;">Bin√§r datumv√§ljare - Matematiskt √∂verl√§gsen!</p>
                    <div class="date-display" id="dateDisplay">2020-01-01</div>
                    <div class="date-buttons">
                        <button class="date-btn date-btn-before" id="beforeBtn">Tidigare ‚Üê</button>
                        <button class="date-btn date-btn-exact" id="exactBtn">Bekr√§fta ‚úì</button>
                        <button class="date-btn date-btn-after" id="afterBtn">‚Üí Senare</button>
                    </div>
                    <div style="font-size: 12px; color: #999; margin-top: 10px;">Antal klick: <span id="dateClicks">0</span></div>
                </div>
            </div>

            <!-- Kostnadsst√§lle -->
            <div class="form-group">
                <label class="form-label">Kostnadsst√§lle (4 siffror)</label>
                <div class="cost-center-visual">
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit1" width="60" height="80"></canvas>
                        <div class="digit-value" id="value1">0</div>
                    </div>
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit2" width="60" height="80"></canvas>
                        <div class="digit-value" id="value2">0</div>
                    </div>
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit3" width="60" height="80"></canvas>
                        <div class="digit-value" id="value3">0</div>
                    </div>
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit4" width="60" height="80"></canvas>
                        <div class="digit-value" id="value4">0</div>
                    </div>
                </div>
                <div class="form-hint">Klicka p√• siffran n√§r den roterar till r√§tt position.</div>
            </div>

            <!-- Avdelning -->
            <div class="form-group">
                <label class="form-label">Avdelning <span class="required">*</span></label>
                <select class="form-input" id="departmentSelect">
                    <option value="">V√§lj avdelning</option>
                    <option value="it">IT</option>
                    <option value="hr">HR</option>
                    <option value="sales">F√∂rs√§ljning</option>
                    <option value="support">Support</option>
                    <option value="finance">Ekonomi</option>
                </select>
                <div class="form-hint">Listan sorteras om slumpm√§ssigt f√∂r att ge alla avdelningar en r√§ttvis chans.</div>
            </div>
        </div>

        <!-- KORT 3: S√ÑKERHET (NY) -->
        <div class="card">
            <h2 class="card-title">S√§kerhet & Konto</h2>
            <p class="card-subtitle">Skapa ett s√§kert l√∂senord med v√•r slumpgenerator-modul.</p>

            <div class="form-group">
                <label class="form-label">Nytt l√∂senord <span class="required">*</span></label>
                <div class="password-roulette-container">
                    <div class="roulette-display">
                        <span id="pwd-result" class="pwd-text">_</span>
                    </div>
                    
                    <div class="roulette-active-char-box">
                        <div id="charSpinner">A</div>
                    </div>

                    <div class="roulette-controls">
                        <button type="button" class="btn btn-primary" id="lockCharBtn">L√ÖS TECKEN</button>
                        <button type="button" class="btn btn-secondary" id="resetPwdBtn">B√∂rja om</button>
                    </div>
                    
                    <div class="form-hint" style="margin-top: 15px; color: #ccc;">
                        V√§nta tills √∂nskat tecken visas och klicka "L√•s". Hastigheten √∂kar f√∂r varje tecken f√∂r att f√∂rhindra hacking.
                    </div>
                    <div class="password-strength-meter">
                        <div class="strength-bar" id="strengthBar"></div>
                    </div>
                    <div id="strengthText" style="font-size: 12px; text-align: right; margin-top: 5px;">Oskyddad</div>
                </div>
            </div>
        </div>

        <!-- KORT 4: LEVERANS (NY) -->
        <div class="card">
            <h2 class="card-title">Leverans av h√•rdvara</h2>
            <p class="card-subtitle">Ange exakt geografisk position d√§r du vill m√∂ta budet.</p>

            <div class="geo-picker">
                <div class="geo-display">
                    Lat: <span id="latVal">59.3293</span> | Long: <span id="longVal">18.0686</span>
                </div>
                
                <div class="geo-map-placeholder" id="geoMap">
                    <div class="geo-pin" id="geoPin">üìç</div>
                    <div class="wind-indicator" id="windInd">Vind: Stilla üí®</div>
                </div>

                <div class="geo-controls">
                    <label class="form-label">Latitud (Nord/Syd)</label>
                    <input type="range" min="55" max="69" step="0.0001" value="59.3293" class="geo-slider" id="latSlider">
                    
                    <label class="form-label" style="margin-top: 15px;">Longitud (V√§st/√ñst)</label>
                    <input type="range" min="11" max="24" step="0.0001" value="18.0686" class="geo-slider" id="longSlider">
                </div>
                <div class="form-hint">
                    Varning: Starka digitala vindar kan f√• mark√∂ren att driva. Korrigera positionen kontinuerligt.
                </div>
            </div>
        </div>

        <!-- KORT 5: INST√ÑLLNINGAR (VOLYM) -->
        <div class="card">
            <h2 class="card-title">Inst√§llningar</h2>
            <p class="card-subtitle">Anpassa din upplevelse.</p>

            <div class="form-group">
                <label class="form-label">Notifikationsvolym</label>
                <div class="volume-control">
                    <p style="text-align: center; color: #666; margin-bottom: 20px;">Gravitationsbaserad volymkontroll</p>
                    <div style="display: flex; gap: 40px; align-items: center; justify-content: center;">
                        <div style="text-align: center;">
                            <div style="font-size: 30px;">üîä</div>
                        </div>
                        <!-- Slider container -->
                        <div style="position: relative; width: 60px; height: 300px; background: linear-gradient(to top, #e1e1e1 0%, #0078d4 100%); border-radius: 30px; border: 3px solid #0078d4;">
                            <div id="volumeSlider" style="position: absolute; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; background: white; border: 4px solid #0078d4; border-radius: 50%; cursor: grab; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"></div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 30px;">üîá</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 25px;">
                        <div style="font-size: 32px; font-weight: 700; color: #0078d4;" id="volumeValueGravity">50%</div>
                        <div class="form-hint">F√∂r musen √•t v√§nster f√∂r att s√§nka volym, √•t h√∂ger f√∂r att h√∂ja. Fysiklagar g√§ller.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- KORT 6: TJ√ÑNSTER -->
        <div class="card">
            <h2 class="card-title">V√§lj Tj√§nster</h2>
            <p class="card-subtitle">Klicka 3 g√•nger p√• varje kort f√∂r att bekr√§fta val.</p>
            <div class="service-grid">
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üíª</div>
                    <div class="service-title">Laptop</div>
                    <div class="service-desc">Standard PC.</div>
                </div>
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üîê</div>
                    <div class="service-title">VPN-token</div>
                    <div class="service-desc">F√∂r distansarbete.</div>
                </div>
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üì±</div>
                    <div class="service-title">iPhone 8</div>
                    <div class="service-desc">Fr√•n lagret.</div>
                </div>
            </div>
        </div>

        <!-- KORT 7: VILLKOR & GODK√ÑNNANDE (NY) -->
        <div class="card" style="border: 2px solid #d13438;">
            <h2 class="card-title">Slutgiltigt Godk√§nnande</h2>
            
            <div class="terms-scroll-box" id="termsBox">
                <strong>ALLM√ÑNNA VILLKOR F√ñR IT-SERVICE</strong><br><br>
                1. Genom att anv√§nda detta formul√§r godk√§nner du att IT-avdelningen har r√§tt men inte skyldighet att l√∂sa dina problem.<br><br>
                2. "Starta om datorn" √§r alltid det f√∂rsta steget, oavsett om du best√§ller en musmatta eller beh√∂righet.<br><br>
                3. Scrollhastigheten i denna ruta har begr√§nsats f√∂r att simulera k√§nslan av att l√§sa ett juridiskt dokument noggrant. Vi vet att du inte l√§ser det √§nd√•.<br><br>
                4. H√•rdvara levereras till angivna koordinater. Om vinden tar koordinaterna levereras h√•rdvaran till vinden.<br><br>
                5. L√∂senordet du genererade nyss har redan g√•tt ut. V√§nligen byt det inom 3 minuter efter inloggning.<br><br>
                6. Kaffe vid IT-avdelningen √§r endast f√∂r IT-personal.<br><br>
                7. Har du l√§st hit? Bra jobbat. Forts√§tt scrolla. Lite till.<br><br>
                8. Snart klar...<br><br>
                9. Okej, du √§r redo att balansera slidern nedan.
            </div>

            <div class="form-group" style="margin-top: 20px;">
                <label class="form-label">Dra reglaget till den dolda zonen och <span style="text-decoration: underline;">h√•ll kvar i 3 sekunder</span> f√∂r att godk√§nna</label>
                <div class="approval-container">
                    <div class="approval-zone"></div> <!-- Den osynliga zonen -->
                    <div class="approval-thumb" id="approvalThumb">DRA</div>
                    <div class="approval-timer" id="approvalTimer">0.0s</div>
                </div>
                <div class="form-hint" id="approvalStatus" style="color: #d13438; font-weight: bold; text-align: center; margin-top: 10px;">EJ GODK√ÑND</div>
            </div>

            <div style="margin-top: 40px; display: flex; gap: 15px; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="location.reload()">Avbryt (Ladda om)</button>
                <button class="btn btn-primary" id="submitBtn" disabled style="opacity: 0.5; cursor: not-allowed;">Skicka best√§llning</button>
            </div>
        </div>

    </div>

    <script>
        // --- LOGIK F√ñR ALFABETHJUL ---
        const alphabetWheel = document.getElementById('alphabetWheel');
        const alphabetCtx = alphabetWheel.getContext('2d');
        const nameDisplay = document.getElementById('nameDisplay');
        let currentName = '';
        let alphabetRotation = 0;
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ√Ö√Ñ√ñ '; // Inkluderar ett mellanslag
        
        function drawAlphabetWheel() {
            alphabetCtx.clearRect(0, 0, 140, 140);
            alphabetCtx.save();
            alphabetCtx.translate(70, 70);
            alphabetCtx.rotate(alphabetRotation);
            
            for (let i = 0; i < alphabet.length; i++) {
                alphabetCtx.save();
                alphabetCtx.rotate((i * Math.PI * 2) / alphabet.length);
                alphabetCtx.textAlign = 'center';
                alphabetCtx.font = 'bold 16px Arial';
                alphabetCtx.fillStyle = i === 0 ? '#0078d4' : '#333';
                alphabetCtx.fillText(alphabet[i], 0, -52);
                alphabetCtx.restore();
            }
            alphabetCtx.restore();
            // Oregelbunden hastighet
            alphabetRotation += 0.03 + (Math.sin(Date.now() / 500) * 0.02);
            requestAnimationFrame(drawAlphabetWheel);
        }
        drawAlphabetWheel();
        
        alphabetWheel.addEventListener('click', () => {
            const index = Math.floor(((-alphabetRotation % (Math.PI * 2)) + Math.PI * 2) / (Math.PI * 2) * alphabet.length) % alphabet.length;
            const letter = alphabet[index];
            currentName += letter;
            nameDisplay.textContent = currentName;
        });
        
        document.getElementById('nameSpace').addEventListener('click', () => currentName += ' ', nameDisplay.textContent = currentName);
        document.getElementById('nameBackspace').addEventListener('click', () => { currentName = currentName.slice(0, -1); nameDisplay.textContent = currentName; });
        document.getElementById('nameClear').addEventListener('click', () => { currentName = ''; nameDisplay.textContent = currentName; });

        // --- LOGIK F√ñR TELEFON SLIDER ---
        const phoneSlider = document.getElementById('phoneSlider');
        const phoneDisplay = document.getElementById('phoneDisplay');
        phoneSlider.addEventListener('input', (e) => {
            const str = '0' + e.target.value;
            phoneDisplay.textContent = str.substring(0, 3) + '-' + str.substring(3, 6) + ' ' + str.substring(6, 8) + ' ' + str.substring(8);
        });

        // --- LOGIK F√ñR DATUM ---
        const dateDisplay = document.getElementById('dateDisplay');
        const dateClicks = document.getElementById('dateClicks');
        let minDate = new Date('2000-01-01');
        let maxDate = new Date('2030-12-31');
        let currentDate = new Date('2020-01-01');
        let clickCount = 0;
        
        function updateDate() {
            const midTime = minDate.getTime() + (maxDate.getTime() - minDate.getTime()) / 2;
            currentDate = new Date(midTime);
            dateDisplay.textContent = currentDate.toISOString().split('T')[0];
            clickCount++;
            dateClicks.textContent = clickCount;
        }
        
        document.getElementById('beforeBtn').addEventListener('click', () => { maxDate = new Date(currentDate.getTime() - 86400000); updateDate(); });
        document.getElementById('afterBtn').addEventListener('click', () => { minDate = new Date(currentDate.getTime() + 86400000); updateDate(); });
        document.getElementById('exactBtn').addEventListener('click', () => { dateDisplay.style.color = '#107c10'; setTimeout(() => dateDisplay.style.color = '#0078d4', 1000); });

        // --- LOGIK F√ñR KOSTNADSST√ÑLLE ---
        const digitConfigs = [
            { canvas: document.getElementById('digit1'), value: document.getElementById('value1'), rotation: 0, speed: 0.03 },
            { canvas: document.getElementById('digit2'), value: document.getElementById('value2'), rotation: 1, speed: 0.04 },
            { canvas: document.getElementById('digit3'), value: document.getElementById('value3'), rotation: 2, speed: 0.05 },
            { canvas: document.getElementById('digit4'), value: document.getElementById('value4'), rotation: 3, speed: 0.035 }
        ];
        
        digitConfigs.forEach(config => {
            const ctx = config.canvas.getContext('2d');
            function drawDigit() {
                ctx.clearRect(0, 0, 60, 80);
                ctx.save(); ctx.translate(30, 40); ctx.rotate(config.rotation);
                for (let i = 0; i < 10; i++) {
                    ctx.save(); ctx.rotate((i * Math.PI * 2) / 10);
                    ctx.font = 'bold 18px Arial'; ctx.fillStyle = i===0?'#0078d4':'#ccc';
                    ctx.fillText(i, 0, -25); ctx.restore();
                }
                ctx.restore();
                config.rotation += config.speed;
                requestAnimationFrame(drawDigit);
            }
            drawDigit();
            config.canvas.addEventListener('click', () => {
                const digit = Math.floor(((-config.rotation % (Math.PI * 2)) + Math.PI * 2) / (Math.PI * 2) * 10) % 10;
                config.value.textContent = digit;
            });
        });

        // --- LOGIK F√ñR L√ñSENORD ROULETTE ---
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&";
        const spinner = document.getElementById('charSpinner');
        const pwdResult = document.getElementById('pwd-result');
        const lockBtn = document.getElementById('lockCharBtn');
        const resetBtn = document.getElementById('resetPwdBtn');
        const strengthBar = document.getElementById('strengthBar');
        
        let charIndex = 0;
        let currentPassword = "";
        let spinSpeed = 120; 
        let spinInterval;

        function spinChar() {
            charIndex = (charIndex + 1) % chars.length;
            spinner.textContent = chars[charIndex];
        }
        function startSpinner() {
            if(spinInterval) clearInterval(spinInterval);
            spinInterval = setInterval(spinChar, spinSpeed);
        }
        startSpinner();

        lockBtn.addEventListener('click', () => {
            const lockedChar = spinner.textContent;
            currentPassword += lockedChar;
            pwdResult.textContent = currentPassword;
            spinSpeed = Math.max(15, spinSpeed - 10); // √ñkar hastigheten!
            startSpinner();
            
            const width = Math.min(100, currentPassword.length * 8);
            strengthBar.style.width = width + '%';
            if(currentPassword.length > 12) {
                strengthBar.style.background = '#d13438'; // Blir r√∂tt om f√∂r l√•ngt (overflow)
                document.getElementById('strengthText').textContent = "BUFFERT√ñVERFL√ñDE!";
            } else {
                document.getElementById('strengthText').textContent = "Styrka: " + width + "%";
            }
        });

        resetBtn.addEventListener('click', () => {
            currentPassword = ""; pwdResult.textContent = "_"; spinSpeed = 120; strengthBar.style.width = "0%"; startSpinner();
        });

        // --- LOGIK F√ñR GEO LEVERANS MED VIND ---
        const latSlider = document.getElementById('latSlider');
        const longSlider = document.getElementById('longSlider');
        const latVal = document.getElementById('latVal');
        const longVal = document.getElementById('longVal');
        const geoPin = document.getElementById('geoPin');
        const windInd = document.getElementById('windInd');
        
        let windX = 0.0001; let windY = 0.0001;
        
        function updateMap() {
            const latPercent = 100 - ((latSlider.value - 55) / (69 - 55) * 100);
            const longPercent = (longSlider.value - 11) / (24 - 11) * 100;
            geoPin.style.top = latPercent + '%';
            geoPin.style.left = longPercent + '%';
            latVal.textContent = parseFloat(latSlider.value).toFixed(4);
            longVal.textContent = parseFloat(longSlider.value).toFixed(4);
        }

        // Vindsimulering
        setInterval(() => {
            if(Math.random() > 0.9) { // Byt vind ibland
                windX = (Math.random() - 0.5) * 0.002;
                windY = (Math.random() - 0.5) * 0.002;
                const speed = Math.round(Math.abs(windX * 5000));
                windInd.textContent = `Vind: ${windX > 0 ? '√ñst' : 'V√§st'} ${speed} m/s üí®`;
            }
            // Flytta sliders
            latSlider.value = parseFloat(latSlider.value) + windY;
            longSlider.value = parseFloat(longSlider.value) + windX;
            updateMap();
        }, 100);
        latSlider.addEventListener('input', updateMap);
        longSlider.addEventListener('input', updateMap);

        // --- LOGIK F√ñR GODK√ÑNNANDE SLIDER ---
        const thumb = document.getElementById('approvalThumb');
        const appContainer = document.querySelector('.approval-container');
        const timerDisplay = document.getElementById('approvalTimer');
        const statusDisplay = document.getElementById('approvalStatus');
        const submitBtn = document.getElementById('submitBtn');
        
        let isDraggingApproval = false;
        let approvedTime = 0;
        let checkInterval;

        thumb.addEventListener('mousedown', (e) => { isDraggingApproval = true; e.preventDefault(); });
        
        document.addEventListener('mouseup', () => {
            if(isDraggingApproval) {
                isDraggingApproval = false;
                thumb.style.left = '10px';
                approvedTime = 0;
                timerDisplay.textContent = "0.0s";
                clearInterval(checkInterval);
                if(statusDisplay.textContent !== "GODK√ÑND!") {
                     statusDisplay.textContent = "EJ GODK√ÑND (Tappad)";
                }
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDraggingApproval) return;
            const rect = appContainer.getBoundingClientRect();
            let x = e.clientX - rect.left - 25; 
            x = Math.max(0, Math.min(x, rect.width - 50));
            thumb.style.left = x + 'px';

            const percent = x / (rect.width - 50);
            clearInterval(checkInterval);
            
            // Zonen √§r runt 72% (se CSS left: 72%)
            if (percent > 0.70 && percent < 0.76) { 
                thumb.style.borderColor = "#bad80a";
                checkInterval = setInterval(() => {
                    approvedTime += 0.1;
                    timerDisplay.textContent = approvedTime.toFixed(1) + "s";
                    if (approvedTime >= 3.0) {
                        statusDisplay.textContent = "GODK√ÑND!";
                        statusDisplay.style.color = "#107c10";
                        thumb.style.background = "#107c10";
                        thumb.textContent = "‚úì";
                        submitBtn.disabled = false;
                        submitBtn.style.opacity = 1;
                        submitBtn.style.cursor = "pointer";
                        clearInterval(checkInterval);
                        isDraggingApproval = false; // L√•s den
                    }
                }, 100);
            } else {
                thumb.style.borderColor = "#999";
                approvedTime = 0;
                timerDisplay.textContent = "0.0s";
            }
        });

        // --- LOGIK F√ñR VOLYM GRAVITATION ---
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeValueGravity = document.getElementById('volumeValueGravity');
        let sliderPos = 150; 
        let sliderVel = 0;
        let isDraggingVolume = false;
        let startY, startPos;
        
        volumeSlider.addEventListener('mousedown', (e) => { isDraggingVolume = true; startY = e.clientY; startPos = sliderPos; volumeSlider.style.cursor = 'grabbing'; sliderVel = 0; });
        document.addEventListener('mouseup', () => { if(isDraggingVolume) volumeSlider.style.cursor = 'grab'; isDraggingVolume = false; });
        
        document.addEventListener('mousemove', (e) => {
            if (isDraggingVolume) {
                const deltaY = e.clientY - startY;
                sliderPos = Math.max(0, Math.min(260, startPos + deltaY));
            } else {
                const rect = volumeSlider.getBoundingClientRect();
                const cx = rect.left + rect.width/2;
                const cy = rect.top + rect.height/2;
                const dx = e.clientX - cx;
                const dy = Math.abs(e.clientY - cy);
                
                if (dy < 300 && Math.abs(dx) < 500) {
                    const grav = (500 - Math.abs(dx))/500 * 0.8;
                    sliderVel += (dx < 0) ? grav : -grav; // V√§nster = ner, H√∂ger = upp
                }
            }
        });

        function physicsLoop() {
            if (!isDraggingVolume) {
                sliderPos += sliderVel;
                sliderPos = Math.max(0, Math.min(260, sliderPos));
                sliderVel *= 0.96; // Friktion
            }
            volumeSlider.style.top = sliderPos + 'px';
            const vol = Math.round((1 - sliderPos/260) * 100);
            volumeValueGravity.textContent = vol + '%';
            requestAnimationFrame(physicsLoop);
        }
        physicsLoop();

        // --- LOGIK F√ñR AVDELNING DROPDOWN ---
        const deptSelect = document.getElementById('departmentSelect');
        deptSelect.addEventListener('focus', () => {
            const opts = Array.from(deptSelect.options).slice(1); // Spara alternativen
            deptSelect.innerHTML = '<option value="">Laddar...</option>';
            setTimeout(() => {
                opts.sort(() => Math.random() - 0.5);
                deptSelect.innerHTML = '<option value="">V√§lj avdelning</option>';
                opts.forEach(o => deptSelect.appendChild(o));
            }, 500);
        });

        // --- LOGIK F√ñR SERVICE CLICK ---
        document.querySelectorAll('.service-item').forEach(item => {
            const cnt = item.querySelector('.click-counter');
            let c = 0;
            item.addEventListener('click', () => {
                c++; cnt.textContent = c + '/3';
                if(c>=3) { 
                    item.style.borderColor='#107c10'; item.style.background='#f0fff4'; 
                    setTimeout(() => { item.style.borderColor='#e1e1e1'; item.style.background='white'; c=0; cnt.textContent='0/3'; }, 2000);
                }
            });
        });

        // --- SUBMIT ---
        document.getElementById('submitBtn').addEventListener('click', () => {
            alert("Tack! Din best√§llning behandlas nu av v√•ra algoritmer (f√∂rv√§ntad v√§ntetid: 6-8 √•r).");
        });

    </script>
</body>
</html>
