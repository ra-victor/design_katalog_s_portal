<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT-Serviceportalen</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            color: #333;
        }

        .header {
            background: white;
            border-bottom: 3px solid #0078d4;
            padding: 0 40px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 22px;
            font-weight: 600;
            color: #0078d4;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .user-name {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: #f3f3f3;
            border-radius: 4px;
            cursor: pointer;
        }

        .container {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 40px;
        }

        .breadcrumb {
            font-size: 14px;
            color: #666;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1a1a1a;
        }

        .page-subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1a1a1a;
        }

        .card-subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: 12px;
            color: #333;
        }

        .required {
            color: #d13438;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d1d1;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #0078d4;
        }

        .form-hint {
            font-size: 13px;
            color: #666;
            margin-top: 8px;
            font-style: italic;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #0078d4;
            color: white;
        }

        .btn-primary:hover {
            background: #106ebe;
        }

        .btn-secondary {
            background: white;
            color: #333;
            border: 1px solid #d1d1d1;
        }

        .btn-secondary:hover {
            background: #f3f3f3;
        }

        /* Innovativ namn-v√§ljare med alfabet-hjul */
        .name-selector {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            padding: 20px;
            background: #f9f9f9;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
        }

        .alphabet-wheel-container {
            text-align: center;
        }

        .alphabet-wheel {
            border: 2px solid #0078d4;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .name-output {
            flex: 1;
        }

        .name-display {
            background: white;
            border: 2px solid #0078d4;
            border-radius: 4px;
            padding: 20px;
            min-height: 80px;
            font-size: 24px;
            font-family: 'Courier New', monospace;
            word-break: break-all;
            margin-bottom: 15px;
        }

        .name-controls {
            display: flex;
            gap: 10px;
        }

        /* F√∂renklad telefonnummer-input med precision slider */
        .phone-input-modern {
            padding: 20px;
            background: linear-gradient(135deg, #f9f9f9 0%, #ffffff 100%);
            border: 1px solid #e1e1e1;
            border-radius: 8px;
        }

        .phone-display {
            text-align: center;
            font-size: 32px;
            font-family: 'Courier New', monospace;
            color: #0078d4;
            font-weight: 600;
            padding: 20px;
            background: white;
            border: 2px solid #0078d4;
            border-radius: 8px;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .phone-slider {
            width: 100%;
            height: 8px;
            background: linear-gradient(to right, #0078d4, #106ebe);
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }

        .phone-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: white;
            border: 3px solid #0078d4;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* Optimerad datum-v√§ljare med bin√§r s√∂kning */
        .date-picker-optimized {
            padding: 25px;
            background: white;
            border: 2px solid #0078d4;
            border-radius: 8px;
            text-align: center;
        }

        .date-display {
            font-size: 48px;
            font-weight: 700;
            color: #0078d4;
            margin: 30px 0;
            font-family: 'Courier New', monospace;
        }

        .date-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .date-btn {
            padding: 15px 35px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .date-btn-before {
            background: #ff6b6b;
            color: white;
        }

        .date-btn-before:hover {
            background: #ff5252;
        }

        .date-btn-after {
            background: #51cf66;
            color: white;
        }

        .date-btn-after:hover {
            background: #40c057;
        }

        .date-btn-exact {
            background: #0078d4;
            color: white;
        }

        .date-btn-exact:hover {
            background: #106ebe;
        }

        .search-counter {
            font-size: 13px;
            color: #666;
            margin-top: 15px;
        }

        /* Visuell kostnadsst√§lle-v√§ljare */
        .cost-center-visual {
            display: flex;
            gap: 20px;
            padding: 20px;
            background: #f9f9f9;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
            justify-content: center;
        }

        .digit-spinner {
            text-align: center;
        }

        .digit-canvas {
            border: 2px solid #0078d4;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: block;
            margin: 0 auto;
        }

        .digit-value {
            margin-top: 15px;
            font-size: 28px;
            font-weight: 700;
            color: #0078d4;
            font-family: 'Courier New', monospace;
        }

        /* Interaktiv volymkontroll f√∂r notifikationer */
        .volume-control {
            padding: 25px;
            background: white;
            border: 2px solid #0078d4;
            border-radius: 8px;
        }

        .volume-circle-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 20px auto;
        }

        .volume-value-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: 700;
            color: #0078d4;
        }

        .notification-banner {
            background: #fff4ce;
            border: 1px solid #ffb900;
            border-radius: 4px;
            padding: 15px 20px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .service-item {
            background: white;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .service-item:hover {
            border-color: #0078d4;
            box-shadow: 0 4px 8px rgba(0,0,0,0.12);
        }

        .service-icon {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .service-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1a1a1a;
        }

        .service-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        .click-counter {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #0078d4;
            color: white;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .name-selector {
                flex-direction: column;
            }
            
            .service-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="header-content">
            <div class="logo">IT-Serviceportalen</div>
            <div class="user-menu">
                <div class="user-name">
                    <span>üë§</span>
                    <span>Anna Andersson</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="breadcrumb">Hem > Tj√§nster > Ny best√§llning</div>
        
        <h1 class="page-title">Best√§ll ny beh√∂righet</h1>
        <p class="page-subtitle">Fyll i formul√§ret nedan f√∂r att best√§lla √•tkomst till system och tj√§nster.</p>

        <div class="notification-banner">
            <span>üí°</span>
            <div>
                <strong>Ny anv√§ndarupplevelse!</strong> Vi har uppdaterat v√•ra formul√§r med moderna, interaktiva komponenter f√∂r en smidigare process.
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">Personuppgifter</h2>
            <p class="card-subtitle">Ange dina uppgifter med v√•ra f√∂rb√§ttrade input-metoder</p>
            
            <div class="form-group">
                <label class="form-label">Fullst√§ndigt namn <span class="required">*</span></label>
                <div class="name-selector">
                    <div class="alphabet-wheel-container">
                        <canvas class="alphabet-wheel" id="alphabetWheel" width="140" height="140"></canvas>
                        <p class="form-hint">Klicka f√∂r bokstav</p>
                    </div>
                    <div class="name-output">
                        <div class="name-display" id="nameDisplay"></div>
                        <div class="name-controls">
                            <button type="button" class="btn btn-secondary" id="nameSpace">Mellanslag</button>
                            <button type="button" class="btn btn-secondary" id="nameBackspace">‚å´ Radera</button>
                            <button type="button" class="btn btn-secondary" id="nameClear">Rensa</button>
                        </div>
                    </div>
                </div>
                <div class="form-hint">Klicka p√• alfabethjulet n√§r √∂nskad bokstav visas √∂verst</div>
            </div>

            <div class="form-group">
                <label class="form-label">Mobiltelefon <span class="required">*</span></label>
                <div class="phone-input-modern">
                    <div class="phone-display" id="phoneDisplay">07X-XXX XX XX</div>
                    <input type="range" class="phone-slider" id="phoneSlider" min="700000000" max="799999999" value="700000000" step="1">
                    <div class="form-hint">Precisionsjustera ditt telefonnummer med slidern</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">E-postadress <span class="required">*</span></label>
                <input type="email" class="form-input" id="emailInput" placeholder="namn@foretag.se">
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">Anst√§llningsuppgifter</h2>
            <p class="card-subtitle">Specificera din organisationstillh√∂righet</p>

            <div class="form-group">
                <label class="form-label">Startdatum <span class="required">*</span></label>
                <div class="date-picker-optimized">
                    <p style="margin-bottom: 20px; color: #666;">Optimerad datumv√§ljare med bin√§r s√∂kning - f√§rre klick!</p>
                    <div class="date-display" id="dateDisplay">2020-01-01</div>
                    <div class="date-buttons">
                        <button class="date-btn date-btn-before" id="beforeBtn">Tidigare ‚Üê</button>
                        <button class="date-btn date-btn-exact" id="exactBtn">Detta datum ‚úì</button>
                        <button class="date-btn date-btn-after" id="afterBtn">‚Üí Senare</button>
                    </div>
                    <div class="search-counter">Klick: <strong id="dateClicks">0</strong> | Genomsnitt: 14 klick per datum</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Kostnadsst√§lle</label>
                <div class="cost-center-visual">
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit1" width="80" height="100"></canvas>
                        <div class="digit-value" id="value1">0</div>
                    </div>
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit2" width="80" height="100"></canvas>
                        <div class="digit-value" id="value2">0</div>
                    </div>
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit3" width="80" height="100"></canvas>
                        <div class="digit-value" id="value3">0</div>
                    </div>
                    <div class="digit-spinner">
                        <canvas class="digit-canvas" id="digit4" width="80" height="100"></canvas>
                        <div class="digit-value" id="value4">0</div>
                    </div>
                </div>
                <div class="form-hint">Klicka p√• varje roterande siffra n√§r √∂nskat v√§rde visas</div>
            </div>

            <div class="form-group">
                <label class="form-label">Avdelning <span class="required">*</span></label>
                <select class="form-input" id="departmentSelect">
                    <option value="">V√§lj avdelning</option>
                    <option value="it">IT</option>
                    <option value="hr">HR</option>
                    <option value="sales">F√∂rs√§ljning</option>
                    <option value="support">Support</option>
                    <option value="finance">Ekonomi</option>
                </select>
                <div class="form-hint">Alfabetiskt sorterad f√∂r din bekv√§mlighet</div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">Inst√§llningar</h2>
            <p class="card-subtitle">Anpassa din anv√§ndarupplevelse</p>

            <div class="form-group">
                <label class="form-label">Notifikationsvolym</label>
                <div class="volume-control">
                    <p style="text-align: center; color: #666; margin-bottom: 20px;">Gravitationsbaserad volymkontroll - innovativ styrning genom musposition</p>
                    <div style="display: flex; gap: 40px; align-items: center; justify-content: center;">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üîä</div>
                            <div style="font-size: 14px; color: #666;">100%</div>
                        </div>
                        <div style="position: relative; width: 60px; height: 400px; background: linear-gradient(to top, #e1e1e1 0%, #0078d4 100%); border-radius: 30px; border: 3px solid #0078d4;">
                            <div id="volumeSlider" style="position: absolute; left: 50%; transform: translateX(-50%); width: 50px; height: 50px; background: white; border: 4px solid #0078d4; border-radius: 50%; cursor: grab; box-shadow: 0 4px 8px rgba(0,0,0,0.2); transition: none;"></div>
                            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none;">
                                <div style="position: absolute; left: 70px; top: 0; font-size: 12px; color: #666;">Max</div>
                                <div style="position: absolute; left: 70px; top: 50%; transform: translateY(-50%); font-size: 12px; color: #666;">50%</div>
                                <div style="position: absolute; left: 70px; bottom: 0; font-size: 12px; color: #666;">Tyst</div>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üîá</div>
                            <div style="font-size: 14px; color: #666;">0%</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 25px;">
                        <div style="font-size: 32px; font-weight: 700; color: #0078d4;" id="volumeValueGravity">50%</div>
                        <div class="form-hint">F√∂r musen √•t v√§nster f√∂r att s√§nka volym, √•t h√∂ger f√∂r att h√∂ja</div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 40px; display: flex; gap: 15px; justify-content: flex-end;">
                <button class="btn btn-secondary">Avbryt</button>
                <button class="btn btn-primary" id="submitBtn">Skicka best√§llning</button>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">Popul√§ra tj√§nster</h2>
            <p class="card-subtitle">Klicka flera g√•nger f√∂r att bekr√§fta ditt val (f√∂rhindrar felklick)</p>
            <div class="service-grid">
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üíª</div>
                    <div class="service-title">Datorutrustning</div>
                    <div class="service-desc">Best√§ll ny laptop, sk√§rm eller tillbeh√∂r.</div>
                </div>
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üîê</div>
                    <div class="service-title">√Ötkomstbeh√∂righeter</div>
                    <div class="service-desc">Ans√∂k om tillg√•ng till system och applikationer.</div>
                </div>
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üì±</div>
                    <div class="service-title">Mobiltelefoni</div>
                    <div class="service-desc">Hantera ditt tj√§nsteabonnemang.</div>
                </div>
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">‚òÅÔ∏è</div>
                    <div class="service-title">Molntj√§nster</div>
                    <div class="service-desc">√Ötkomst till molnbaserade tj√§nster.</div>
                </div>
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üõ†Ô∏è</div>
                    <div class="service-title">IT-support</div>
                    <div class="service-desc">F√• hj√§lp med tekniska problem.</div>
                </div>
                <div class="service-item">
                    <div class="click-counter">0/3</div>
                    <div class="service-icon">üìä</div>
                    <div class="service-title">Rapportering</div>
                    <div class="service-desc">Skapa och hantera rapporter.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Roterande alfabethjul
        const alphabetWheel = document.getElementById('alphabetWheel');
        const alphabetCtx = alphabetWheel.getContext('2d');
        const nameDisplay = document.getElementById('nameDisplay');
        let currentName = '';
        let alphabetRotation = 0;
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ√Ö√Ñ√ñ';
        
        function drawAlphabetWheel() {
            alphabetCtx.clearRect(0, 0, 140, 140);
            alphabetCtx.save();
            alphabetCtx.translate(70, 70);
            alphabetCtx.rotate(alphabetRotation);
            
            for (let i = 0; i < alphabet.length; i++) {
                alphabetCtx.save();
                alphabetCtx.rotate((i * Math.PI * 2) / alphabet.length);
                alphabetCtx.textAlign = 'center';
                alphabetCtx.font = 'bold 18px Arial';
                alphabetCtx.fillStyle = i === 0 ? '#0078d4' : '#333';
                alphabetCtx.fillText(alphabet[i], 0, -48);
                alphabetCtx.restore();
            }
            alphabetCtx.restore();
            alphabetRotation += 0.035;
            requestAnimationFrame(drawAlphabetWheel);
        }
        drawAlphabetWheel();
        
        alphabetWheel.addEventListener('click', () => {
            const index = Math.floor(((-alphabetRotation % (Math.PI * 2)) + Math.PI * 2) / (Math.PI * 2) * alphabet.length) % alphabet.length;
            const letter = alphabet[index];
            currentName += letter;
            nameDisplay.textContent = currentName;
        });
        
        document.getElementById('nameSpace').addEventListener('click', () => {
            currentName += ' ';
            nameDisplay.textContent = currentName;
        });
        
        document.getElementById('nameBackspace').addEventListener('click', () => {
            currentName = currentName.slice(0, -1);
            nameDisplay.textContent = currentName;
        });
        
        document.getElementById('nameClear').addEventListener('click', () => {
            currentName = '';
            nameDisplay.textContent = currentName;
        });

        // Telefonnummer precision slider
        const phoneSlider = document.getElementById('phoneSlider');
        const phoneDisplay = document.getElementById('phoneDisplay');
        
        function formatPhone(num) {
            const str = '0' + num.toString();
            return str.substring(0, 3) + '-' + str.substring(3, 6) + ' ' + str.substring(6, 8) + ' ' + str.substring(8);
        }
        
        phoneSlider.addEventListener('input', (e) => {
            phoneDisplay.textContent = formatPhone(e.target.value);
        });

        // Bin√§r s√∂kning f√∂r datum
        const dateDisplay = document.getElementById('dateDisplay');
        const dateClicks = document.getElementById('dateClicks');
        let minDate = new Date('2000-01-01');
        let maxDate = new Date('2030-12-31');
        let currentDate = new Date('2020-01-01');
        let clickCount = 0;
        
        function updateDate() {
            const midTime = minDate.getTime() + (maxDate.getTime() - minDate.getTime()) / 2;
            currentDate = new Date(midTime);
            dateDisplay.textContent = currentDate.toISOString().split('T')[0];
            clickCount++;
            dateClicks.textContent = clickCount;
        }
        
        document.getElementById('beforeBtn').addEventListener('click', () => {
            maxDate = new Date(currentDate.getTime() - 86400000);
            updateDate();
        });
        
        document.getElementById('afterBtn').addEventListener('click', () => {
            minDate = new Date(currentDate.getTime() + 86400000);
            updateDate();
        });
        
        document.getElementById('exactBtn').addEventListener('click', () => {
            dateDisplay.style.color = '#107c10';
            setTimeout(() => {
                dateDisplay.style.color = '#0078d4';
            }, 1000);
        });

        // Roterande kostnadsst√§lle-siffror
        const digitConfigs = [
            { canvas: document.getElementById('digit1'), value: document.getElementById('value1'), rotation: 0, speed: 0.028 },
            { canvas: document.getElementById('digit2'), value: document.getElementById('value2'), rotation: Math.PI/5, speed: 0.037 },
            { canvas: document.getElementById('digit3'), value: document.getElementById('value3'), rotation: Math.PI/3, speed: 0.042 },
            { canvas: document.getElementById('digit4'), value: document.getElementById('value4'), rotation: Math.PI/2, speed: 0.033 }
        ];
        
        digitConfigs.forEach(config => {
            const ctx = config.canvas.getContext('2d');
            
            function drawDigit() {
                ctx.clearRect(0, 0, 80, 100);
                ctx.save();
                ctx.translate(40, 50);
                ctx.rotate(config.rotation);
                
                for (let i = 0; i < 10; i++) {
                    ctx.save();
                    ctx.rotate((i * Math.PI * 2) / 10);
                    ctx.textAlign = 'center';
                    ctx.font = 'bold 24px Arial';
                    ctx.fillStyle = i === 0 ? '#0078d4' : '#666';
                    ctx.fillText(i, 0, -28);
                    ctx.restore();
                }
                ctx.restore();
                config.rotation += config.speed;
                requestAnimationFrame(drawDigit);
            }
            drawDigit();
            
            config.canvas.addEventListener('click', () => {
                const digit = Math.floor(((-config.rotation % (Math.PI * 2)) + Math.PI * 2) / (Math.PI * 2) * 10) % 10;
                config.value.textContent = digit;
            });
        });

        // Gravitationsbaserad volymslider
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeValueGravity = document.getElementById('volumeValueGravity');
        let sliderPosition = 200; // Start i mitten (50%)
        let sliderVelocity = 0;
        let isDraggingVolume = false;
        let dragStartY = 0;
        let dragStartPos = 0;
        
        volumeSlider.addEventListener('mousedown', (e) => {
            isDraggingVolume = true;
            dragStartY = e.clientY;
            dragStartPos = sliderPosition;
            volumeSlider.style.cursor = 'grabbing';
            sliderVelocity = 0;
        });
        
        document.addEventListener('mouseup', () => {
            if (isDraggingVolume) {
                volumeSlider.style.cursor = 'grab';
            }
            isDraggingVolume = false;
        });
        
        document.addEventListener('mousemove', (e) => {
            if (isDraggingVolume) {
                const deltaY = e.clientY - dragStartY;
                sliderPosition = Math.max(0, Math.min(350, dragStartPos + deltaY));
                volumeSlider.style.top = sliderPosition + 'px';
                const volume = Math.round((1 - sliderPosition / 350) * 100);
                volumeValueGravity.textContent = volume + '%';
            }
            
            // Gravitation baserat p√• musposition relativt till slidern
            if (!isDraggingVolume) {
                const sliderRect = volumeSlider.getBoundingClientRect();
                const sliderCenterX = sliderRect.left + sliderRect.width / 2;
                const sliderCenterY = sliderRect.top + sliderRect.height / 2;
                
                // Ber√§kna horisontellt avst√•nd
                const horizontalDist = e.clientX - sliderCenterX;
                const verticalDist = Math.abs(e.clientY - sliderCenterY);
                
                // Om musen √§r n√§ra vertikalt och √•t sidan horisontellt
                if (verticalDist < 250 && Math.abs(horizontalDist) < 400) {
                    // Ju n√§rmare musen √§r, desto starkare gravitation
                    const gravityStrength = (400 - Math.abs(horizontalDist)) / 400 * 0.5;
                    
                    if (horizontalDist < 0) {
                        // Mus till v√§nster = slider faller ned√•t (mot 0%)
                        sliderVelocity += gravityStrength;
                    } else {
                        // Mus till h√∂ger = slider faller upp√•t (mot 100%)
                        sliderVelocity -= gravityStrength;
                    }
                }
            }
        });
        
        // Uppdatera slider-position kontinuerligt
        function updateGravitySlider() {
            if (!isDraggingVolume) {
                sliderPosition += sliderVelocity;
                sliderPosition = Math.max(0, Math.min(350, sliderPosition));
                
                volumeSlider.style.top = sliderPosition + 'px';
                const volume = Math.round((1 - sliderPosition / 350) * 100);
                volumeValueGravity.textContent = volume + '%';
                
                // Friktion
                sliderVelocity *= 0.95;
            }
            requestAnimationFrame(updateGravitySlider);
        }
        updateGravitySlider();
        
        // Initial position
        volumeSlider.style.top = sliderPosition + 'px';

        // Avdelning dropdown med smart sortering
        const departmentSelect = document.getElementById('departmentSelect');
        const departments = [
            { value: 'it', text: 'IT' },
            { value: 'hr', text: 'HR' },
            { value: 'sales', text: 'F√∂rs√§ljning' },
            { value: 'support', text: 'Support' },
            { value: 'finance', text: 'Ekonomi' }
        ];
        
        departmentSelect.addEventListener('focus', () => {
            // Sortera omv√§nt alfabetiskt varje g√•ng anv√§ndaren √∂ppnar dropdown
            departments.sort((a, b) => b.text.localeCompare(a.text, 'sv'));
            
            departmentSelect.innerHTML = '<option value="">V√§lj avdelning</option>';
            departments.forEach(dept => {
                const option = document.createElement('option');
                option.value = dept.value;
                option.textContent = dept.text;
                departmentSelect.appendChild(option);
            });
            
            // Efter en kort stund, sortera p√• nytt
            setTimeout(() => {
                departments.sort(() => Math.random() - 0.5);
                const currentValue = departmentSelect.value;
                departmentSelect.innerHTML = '<option value="">V√§lj avdelning</option>';
                departments.forEach(dept => {
                    const option = document.createElement('option');
                    option.value = dept.value;
                    option.textContent = dept.text;
                    departmentSelect.appendChild(option);
                });
                if (currentValue) {
                    departmentSelect.value = currentValue;
                }
            }, 800);
        });

        // Service items med multi-klick bekr√§ftelse
        document.querySelectorAll('.service-item').forEach(item => {
            const counter = item.querySelector('.click-counter');
            let clicks = 0;
            
            item.addEventListener('click', () => {
                clicks++;
                counter.textContent = `${clicks}/3`;
                
                if (clicks >= 3) {
                    item.style.borderColor = '#107c10';
                    item.style.background = '#f0fff4';
                    setTimeout(() => {
                        item.style.borderColor = '#e1e1e1';
                        item.style.background = 'white';
                        clicks = 0;
                        counter.textContent = '0/3';
                    }, 2000);
                }
            });
        });

        // Submit med validering
        document.getElementById('submitBtn').addEventListener('click', () => {
            alert('Best√§llning skickad! Dina val har registrerats.');
        });

        <!-- NY SEKTION: S√ÑKERHET -->
        <div class="card">
            <h2 class="card-title">S√§kerhet & Konto</h2>
            <p class="card-subtitle">Skapa ett s√§kert l√∂senord med v√•r slumpgenerator-modul</p>

            <div class="form-group">
                <label class="form-label">Nytt l√∂senord <span class="required">*</span></label>
                <div class="password-roulette-container">
                    <div class="roulette-display">
                        <!-- Visar det valda l√∂senordet -->
                        <span id="pwd-result" class="pwd-text">_</span>
                    </div>
                    
                    <div class="roulette-active-char-box">
                        <div class="roulette-spinner" id="charSpinner">A</div>
                    </div>

                    <div class="roulette-controls">
                        <button type="button" class="btn btn-primary" id="lockCharBtn">L√ÖS TECKEN</button>
                        <button type="button" class="btn btn-secondary" id="resetPwdBtn">Rensa</button>
                    </div>
                    
                    <div class="form-hint" style="margin-top: 15px;">
                        <strong>S√§kerhetskrav:</strong> Minst 8 tecken. V√§nta tills √∂nskat tecken visas i rutan och klicka "L√•s tecken" snabbt. Hastigheten √∂kar f√∂r varje tecken f√∂r h√∂gre s√§kerhet.
                    </div>
                    <div class="password-strength-meter">
                        <div class="strength-bar" id="strengthBar"></div>
                    </div>
                    <div id="strengthText" style="font-size: 12px; text-align: right; margin-top: 5px;">Oskyddad</div>
                </div>
            </div>
        </div>

        <!-- NY SEKTION: LEVERANS -->
        <div class="card">
            <h2 class="card-title">Leverans av h√•rdvara</h2>
            <p class="card-subtitle">Ange exakt geografisk position f√∂r leveransbudet</p>

            <div class="geo-picker">
                <div class="geo-display">
                    Lat: <span id="latVal">59.3293</span> | Long: <span id="longVal">18.0686</span>
                </div>
                
                <div class="geo-map-placeholder" id="geoMap">
                    <div class="geo-pin" id="geoPin">üìç</div>
                    <div class="wind-indicator" id="windInd">Vind: V√§st 4 m/s üí®</div>
                </div>

                <div class="geo-controls">
                    <label class="form-label">Latitud (Nord/Syd)</label>
                    <input type="range" min="55" max="69" step="0.0001" value="59.3293" class="geo-slider" id="latSlider">
                    
                    <label class="form-label" style="margin-top: 15px;">Longitud (V√§st/√ñst)</label>
                    <input type="range" min="11" max="24" step="0.0001" value="18.0686" class="geo-slider" id="longSlider">
                </div>
                <div class="form-hint">
                    Observera: V√•ra sliders simuleras med atmosf√§riskt tryck. Stark vind kan f√• din position att driva iv√§g. Korrigera kontinuerligt.
                </div>
            </div>
        </div>

        <!-- NY SEKTION: GODK√ÑNNANDE -->
        <div class="card">
            <h2 class="card-title">Villkor</h2>
            
            <div class="terms-scroll-box" id="termsBox">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. F√∂r att garantera att du l√§ser detta har vi saktat ner scrollhastigheten baserat p√• textens komplexitet. Genom att forts√§tta s√§ljer du din sj√§l till IT-avdelningen. 
                <br><br>
                (Scrolla ner... l√•ngsamt...)
                <br><br><br><br><br><br><br><br><br><br><br><br>
                H√§r √§r slutet.
            </div>

            <div class="form-group" style="margin-top: 20px;">
                <label class="form-label">Dra reglaget till den gr√∂na zonen och h√•ll kvar i 3 sekunder f√∂r att godk√§nna</label>
                <div class="approval-container">
                    <div class="approval-track">
                        <div class="approval-zone"></div>
                        <div class="approval-thumb" id="approvalThumb">drag</div>
                    </div>
                    <div class="approval-timer" id="approvalTimer">0.0s</div>
                </div>
                <div class="form-hint" id="approvalStatus" style="color: #d13438;">Ej godk√§nd</div>
            </div>
        </div>

<style>
    /* CSS f√∂r L√∂senords-Roulette */
    .password-roulette-container {
        background: #2b2b2b;
        padding: 20px;
        border-radius: 8px;
        color: white;
        text-align: center;
    }

    .roulette-display {
        background: #000;
        font-family: 'Courier New', monospace;
        font-size: 24px;
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid #444;
        min-height: 60px;
        letter-spacing: 3px;
        color: #00ff00;
        word-break: break-all;
    }

    .roulette-active-char-box {
        width: 80px;
        height: 80px;
        background: white;
        color: black;
        margin: 0 auto 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 40px;
        font-weight: bold;
        border: 4px solid #0078d4;
        border-radius: 10px;
    }

    .password-strength-meter {
        height: 6px;
        background: #444;
        margin-top: 15px;
        border-radius: 3px;
        overflow: hidden;
    }

    .strength-bar {
        height: 100%;
        width: 0%;
        background: #d13438;
        transition: width 0.3s, background 0.3s;
    }

    /* CSS f√∂r Geo-Picker */
    .geo-picker {
        padding: 20px;
        background: #eef6fb;
        border: 1px solid #b3d6f2;
        border-radius: 8px;
    }

    .geo-display {
        font-family: monospace;
        text-align: center;
        margin-bottom: 15px;
        font-size: 16px;
        color: #0078d4;
        font-weight: bold;
    }

    .geo-map-placeholder {
        height: 200px;
        background: #fff;
        border: 2px dashed #ccc;
        position: relative;
        margin-bottom: 20px;
        overflow: hidden;
    }

    .geo-pin {
        font-size: 30px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -100%); /* Pin point at bottom center */
        transition: top 0.1s linear, left 0.1s linear;
    }

    .wind-indicator {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(255,255,255,0.8);
        padding: 5px 10px;
        font-size: 12px;
        border-radius: 4px;
    }

    .geo-slider {
        width: 100%;
        margin: 10px 0;
    }

    /* CSS f√∂r Godk√§nnande-slider */
    .terms-scroll-box {
        height: 150px;
        overflow-y: scroll;
        border: 1px solid #ccc;
        padding: 15px;
        background: #f9f9f9;
        margin-bottom: 20px;
        font-size: 12px;
        color: #666;
    }

    .approval-container {
        margin-top: 15px;
        height: 60px;
        background: #e1e1e1;
        border-radius: 30px;
        position: relative;
        user-select: none;
    }

    .approval-track {
        position: relative;
        height: 100%;
        width: 100%;
    }

    .approval-zone {
        position: absolute;
        left: 70%; /* Sv√•rt att hitta */
        top: 0;
        bottom: 0;
        width: 40px;
        background: #bad80a; /* Subtle green */
        opacity: 0.5;
    }

    .approval-thumb {
        position: absolute;
        left: 10px;
        top: 5px;
        width: 50px;
        height: 50px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        cursor: grab;
        font-weight: bold;
        color: #666;
        border: 2px solid #999;
    }

    .approval-thumb:active {
        cursor: grabbing;
        background: #0078d4;
        color: white;
    }

    .approval-timer {
        position: absolute;
        top: -25px;
        right: 0;
        font-family: monospace;
        font-weight: bold;
    }
</style>

<script>
    // --- L√ñSENORDS ROULETTE LOGIK ---
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&";
    const spinner = document.getElementById('charSpinner');
    const pwdResult = document.getElementById('pwd-result');
    const lockBtn = document.getElementById('lockCharBtn');
    const resetBtn = document.getElementById('resetPwdBtn');
    const strengthBar = document.getElementById('strengthBar');
    
    let charIndex = 0;
    let currentPassword = "";
    let spinSpeed = 100; // B√∂rjar l√•ngsamt
    let spinInterval;
    let isSpinning = true;

    function spinChar() {
        charIndex = (charIndex + 1) % chars.length;
        spinner.textContent = chars[charIndex];
    }

    function startSpinner() {
        if(spinInterval) clearInterval(spinInterval);
        spinInterval = setInterval(spinChar, spinSpeed);
    }

    startSpinner();

    lockBtn.addEventListener('click', () => {
        // L√§gg till tecknet
        const lockedChar = spinner.textContent;
        currentPassword += lockedChar;
        
        // Uppdatera UI
        pwdResult.textContent = currentPassword;
        
        // G√∂r det sv√•rare: √ñka hastigheten f√∂r varje tecken
        spinSpeed = Math.max(10, spinSpeed - 8); 
        startSpinner();

        // Uppdatera styrkem√§tare (visuellt och absurt)
        const width = Math.min(100, currentPassword.length * 5);
        strengthBar.style.width = width + '%';
        
        // Byt f√§rg beroende p√• om det √§r "bra" tecken (slumpm√§ssigt egentligen i detta fall)
        if (['!', '@', '#'].includes(lockedChar)) {
            strengthBar.style.background = '#00ff00';
        } else if (currentPassword.length > 15) {
             // Om det blir f√∂r l√•ngt, nollst√§lls styrkan f√∂r "buffer overflow" sk√§mt
             strengthBar.style.background = '#d13438';
             document.getElementById('strengthText').textContent = "BUFFERT√ñVERFL√ñDE - OS√ÑKERT";
        }
    });

    resetBtn.addEventListener('click', () => {
        currentPassword = "";
        pwdResult.textContent = "_";
        spinSpeed = 100;
        strengthBar.style.width = "0%";
        startSpinner();
    });


    // --- GEO PICKER MED VIND LOGIK ---
    const latSlider = document.getElementById('latSlider');
    const longSlider = document.getElementById('longSlider');
    const latVal = document.getElementById('latVal');
    const longVal = document.getElementById('longVal');
    const geoPin = document.getElementById('geoPin');
    const windInd = document.getElementById('windInd');
    
    let windX = 0.0002; // Vindens styrka Longitud
    let windY = 0.0001; // Vindens styrka Latitud
    
    // Uppdatera position visuellt
    function updateMap() {
        // Normalisera v√§rden f√∂r kartan (bara visuellt)
        // Lat: 55-69, Long: 11-24
        const latPercent = 100 - ((latSlider.value - 55) / (69 - 55) * 100); // Invertera Y
        const longPercent = (longSlider.value - 11) / (24 - 11) * 100;
        
        geoPin.style.top = latPercent + '%';
        geoPin.style.left = longPercent + '%';
        
        latVal.textContent = parseFloat(latSlider.value).toFixed(4);
        longVal.textContent = parseFloat(longSlider.value).toFixed(4);
    }

    // Vind-funktion
    setInterval(() => {
        // √Ñndra vindriktning slumpm√§ssigt ibland
        if(Math.random() > 0.95) {
            windX = (Math.random() - 0.5) * 0.001;
            windY = (Math.random() - 0.5) * 0.001;
            
            const dir = windX > 0 ? "√ñst" : "V√§st";
            const speed = Math.round(Math.abs(windX * 10000));
            windInd.textContent = `Vind: ${dir} ${speed} m/s üí®`;
        }

        // Applicera vind p√• sliders
        let currentLat = parseFloat(latSlider.value);
        let currentLong = parseFloat(longSlider.value);

        // Sliders r√∂r sig om man inte h√•ller i dem (simulerat genom att bara √§ndra v√§rdet)
        // F√∂r extra jobbighet: De r√∂r sig √§ven n√§r man h√•ller i dem i denna kod, 
        // men vi l√•ter det vara "driften"
        
        latSlider.value = currentLat + windY;
        longSlider.value = currentLong + windX;
        
        updateMap();
    }, 100);

    latSlider.addEventListener('input', updateMap);
    longSlider.addEventListener('input', updateMap);


    // --- GODK√ÑNNANDE SLIDER ---
    const thumb = document.getElementById('approvalThumb');
    const container = document.querySelector('.approval-container');
    const timerDisplay = document.getElementById('approvalTimer');
    const statusDisplay = document.getElementById('approvalStatus');
    
    let isDragging = false;
    let approvedTime = 0;
    let checkInterval;

    thumb.addEventListener('mousedown', (e) => {
        isDragging = true;
        e.preventDefault(); // F√∂rhindra textmarkering
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
        // Om man sl√§pper, √•ker den tillbaka
        thumb.style.left = '10px';
        approvedTime = 0;
        timerDisplay.textContent = "0.0s";
        statusDisplay.textContent = "Ej godk√§nd";
        statusDisplay.style.color = "#d13438";
        clearInterval(checkInterval);
    });

    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;

        const rect = container.getBoundingClientRect();
        let x = e.clientX - rect.left - 25; // Centrera musen p√• tummen
        
        // Begr√§nsa inom beh√•llaren
        x = Math.max(0, Math.min(x, rect.width - 50));
        
        thumb.style.left = x + 'px';

        // Kolla om vi √§r i zonen (70% - ca 80%)
        const percent = x / (rect.width - 50);
        
        // Rensa tidigare timer om vi r√∂r oss utanf√∂r
        clearInterval(checkInterval);
        
        if (percent > 0.68 && percent < 0.75) { // Den gr√∂na zonen
            thumb.style.borderColor = "#bad80a";
            
            // Starta timer
            checkInterval = setInterval(() => {
                approvedTime += 0.1;
                timerDisplay.textContent = approvedTime.toFixed(1) + "s";
                
                if (approvedTime >= 3.0) {
                    statusDisplay.textContent = "GODK√ÑND!";
                    statusDisplay.style.color = "#107c10";
                    thumb.style.background = "#107c10";
                    thumb.style.color = "white";
                    thumb.textContent = "‚úì";
                    clearInterval(checkInterval);
                }
            }, 100);
        } else {
            thumb.style.borderColor = "#999";
            approvedTime = 0;
            timerDisplay.textContent = "0.0s";
        }
    });
</script>
    </script>

</body>
</html>
